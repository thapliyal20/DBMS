					 Lab 4. Database Objects
	
					DATABASE OBJECTS 

    4.1Create the Customer table with the following columns.
	CustomerId Number(5)
	Cust_Name varchar2(20)
	Address1 Varchar2(30)
	Address2 Varchar2(30)
	
		SQL>  CREATE TABLE Customer(CustomerId Number(5),Cust_Name varchar2(20),
		 Address1 Varchar2(30),Address2 Varchar2(30));

     5.Modify the Customer table Cust_Name column of datatype with Varchar2
		  5.1 SQL> ALTER TABLE Customer RENAME COLUMN Cust_Name TO CustomerName;
	 	5.2  SQL>ALTER TABLE Customer MODIFY CustomerName varchar2(30);

     6.  a. Add the following Columns to the Customer table.
	 Gender Varchar2(1)
	 Age Number(3)
	 PhoneNo Number(10)
	
	SQL>-ALTER TABLE Customer ADD (GENDER VARCHAR2(1),Age Number(3),
	    PhoneNo Number(10));
	 
 	 b. b.1) RENAME Customer TO Cust_Table;
	    
	    b.2) Insert into cust_Table values(1000,'Allen', '#115 Chicago', 
		 '#115 Chicago', 'M',25,7878776);
		 
		 Insert into cust_Table values(1001,'George', '#116 France', 	
                 '#116 France', 'M',25,434524); 

		 Insert into cust_Table values(1002, 'Becker','#114 New York',
		 '#114 New York','M',45,431525);

     7. Add the Primary key constraint for Customerld with the name Custld_Prim.
	SQL> ALTER TABLE cust_Table ADD CONSTRAINT Custld_Prim PRIMARY KEY(CUSTOMERID);

      8. Insert the row given below in the Customer table and see the message generated by
        the Oracle server.
       1002, John, #114 Chicago, #114 Chicago, M, 45, 439525

	SQL> Insert into cust_Table values(1002, 'John','#114 Chicago',
	 '#114 Chicago','M',45,439525); 
	
	 ERROR:  An UPDATE or INSERT statement attempted to insert a duplicate key.

     9. Disable the constraint on CustomerId, and insert the following data:
        - 1002, Becker, #114 New York, #114 New york , M, 45, 431525  
        - 1003, Nanapatekar, #115 India, #115 India , M, 45, 431525

	SQL> ALTER TABLE cust_Table DROP CONSTRAINT Custld_Prim;
	 
	 Insert into cust_Table values(1002,'Becker','#115 New York', 
	 '#115 New York', 'M',45,431525);

	 Insert into cust_Table values(1003,'Nanapatekar','#115 India', 
	 '#115 India','M',45,431525);


    10. Enable the constraint on CustomerId of the Customer table, and see the message
           generated by the Oracle server.

	SQL>ERROR: Remove the duplicates and null values before enabling a primary Key. 

    11. ALTER TABLE CUST DROP PRIMARY KEY
      INSERT INTO CUST VALUES(1002,'Becker','#114 New York','#114 New york',45,'m',431525)
      INSERT INTO CUST VALUES(1003,'Nanapatekar','#115 India','#115 India',45,'m',431525) 

    12.Delete all the existing rows from C
	SQL> TRUNCATE TABLE Cust_Table;

    13.In the Customer table, add a column E_mail.
	SQL> ALTER TABLE Cust_Table ADD E_mail varchar2(50);

    14.Drop the E_mail column from Customer table.
	SQL> ALTER TABLE Cust_Table DROP COLUMN E_mail;

    15.Add a new column EmailId to Customer table.
	SQL> ALTER TABLE Cust_Table ADD EmailId varchar2(50);

    16. Mark EmailId column as unused before dropping it.
	SQL>ALTER TABLE Cust_Table SET UNUSED COLUMN EmailId;

    17. Drop the unused EmailId column from the Customer table
	SQL>ALTER TABLE Cust_Table DROP UNUSED COLUMNS;

    18.Create the Suppliers table based on the structure of the Customer table. Include only
the CustomerId, CustomerName, Address1, Address2, and phoneno columns.
Name the columns in the new table as SuppID, SName, Addr1, Addr2, and
Contactno respectively.
	SQL> CREATE TABLE SUPPLIERS (SuppID NUMBER(5),SName VARCHAR2(20),
	Addr1 VARCHAR2(30),Addr2 VARCHAR2(30),Contactno NUMBER(10));

    19. DROP TABLE SUPPLIERS;

	CREATE TABLE CustomerMaster (CustomerId NUMBER(5) CONSTRAINT CustId_PK PRIMARY KEY,
                CustomerName Varchar2(30) Not Null,Addressl Varchar2(30) Not Null,
                Address2 Varchar2(30), Gender Varchar2(l), Age Number(3), PhoneNo Number(10));

    20. CREATE Sequence Account_Num    
	start with 10001              /* Creating Sequence having name Account_Num 
	increment by 1                  starting with 10001 and incrementing by 1 */

	CREATE TABLE AccountsMaster(
	CustomerID Number(5),
	AccountNumber Number(10,2) CONSTRAINT Acc_PK PRIMARY KEY,
	AccountType Char(3),
	LedgerBalance Number(10,2) Not Null
	);                         //Creating Table having name AccountsMasters. 

	INSERT INTO AccountsMaster values( 1233,Account_Num.NEXTVAL,'NRI',10000.00);
	
	INSERT INTO AccountsMaster values (1234,Account_Num.NEXTVAL ,'IND',12000.00);
			
	/*Inserting values in table and Account_Num value with the help of sequence Account_Num. */

    21. Relate AccountsMaster table and CustomerMaster table through Customerld column
   with the constraint name Cust_acc.
	SQL>ALTER TABLE Acc_Master ADD CONSTRAINT Cust_id FOREIGN KEY(cust_id) REFERENCE cust(cust_id)

    22. Insert into CustomerMaster values(1000,'Allen','#115 Chicago','#115 Chicago','M',25,7878776);

	Insert into CustomerMaster values(1001,'George','#116 France','#116 France', 'M',25,434524);

	Insert into CustomerMaster values(1002, 'Becker','#114 NewYork',
	'#114 NewYork','M',45,431525);

    23. Modify the AccountMaster table with the Check constraint to ensure AccountType
   should be either NRI or IND.
  	SQL>ALTER TABLE ACCOUNTSMASTER ADD CONSTRAINT acc_type CHECK (ACCOUNTTYPE='IND' OR ACCOUNTTYPE='NRI' );

    24. Insert 5 rows into the AccountsMaster table:
	SQL>INSERT INTO AccountsMaster values( 1235,Account_Num.NEXTVAL,'NRI',35000.00);
	
	INSERT INTO AccountsMaster values (1236,Account_Num.NEXTVAL ,'IND',75000.00);

	INSERT INTO AccountsMaster values( 1237,Account_Num.NEXTVAL,'IND',60000.00);
	
	INSERT INTO AccountsMaster values (1238,Account_Num.NEXTVAL ,'IND',50000.00);

	INSERT INTO AccountsMaster values (1239,Account_Num.NEXTVAL ,'NRI',30000.00);

    25. Modify the AccountsMaster table keeping a Check constraint with the name
    Balance_Check for the Minimum Balance which should be greater than 5000.
	SQL>ALTER TABLE ACCOUNTSMASTER ADD CONSTRAINT Balance_Check CHECK(LEDGERBALANCE>5000);

    26. Modify the AccountsMaster table such that if Customer is deleted from Customer
table then all his details should be deleted from AccountsMaster table.
	SQL>ALTER TABLE Acc_Master ADD CONSTRAINT cust_id FOREIGN KEY(cust_id) 
          REFERENCE Cust(cust_id) ON DELETE CASCADE; 

    27.Create Backup copy for the AccountsMaster table with the name ‘AccountDetails’.
	SQL> Create Backup copy for the AccountsMaster table with the name ‘AccountDetails’.
	SQL>CREATE SYNONYM AccountDetails FOR ACCOUNTSMASTER;

    28. Create Backup copy for the AccountsMaster table with the name ‘AccountDetails’.
	SQL>RENAME AccountDetails TO BackUpTable;

    29. CREATE VIEW Acc_view(customercode,accountnumber,
        account_type,ledger_balance ) AS SELECT * FROM ACCOUNTSMASTER;  

    30. Create a view on AccountsMaster table with name vAccs_Dtls. This view should list
all customers whose AccountType is ‘IND’ and their balance amount should not be
less than 10000. Using
	SQL>CREATE VIEW vAccs_Dtls AS SELECT * FROM ACCOUNTSMASTER WHERE ACCOUNTTYPE= 'IND' AND LEDGERBALANCE>10000;

    31.   
	
	